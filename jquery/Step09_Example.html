<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Step09_Example.html</title>
	<style>
		.loader{
			position: fixed;
			width: 100%;
			left: 0;
			bottom: 0;
			text-align: center;
			background-color: #999;
			display:none; /*일단 숨기기*/
		}
		.spacer{
			height: 500px;
			background-color: #999;
		}
	</style>
</head>
<body>
<h1>로딩 이미지 테스트</h1>
<div class="container">
	<div class="spacer">.spacer</div>
	<div class="spacer">.spacer</div>
	<div class="spacer">.spacer</div>
</div>
<div class="loader">
	<img src="images/loader.gif" alt="로딩 이미지">
</div>
<script src="js/jquery-3.3.1.js"></script>
<script>
	// window 에 scroll 이벤트가 일어 났을 때 실행할 함수 등록
	$(window).on("scroll",function(){

		//위쪽으로 스크롤된 길이 구하기
		var scrollTop=$(window).scrollTop();
		//window 의 높이
		var windowHeight=$(window).height();
		//document 의 높이
		var documentHeight=$(document).height();
		
		//바닥까지 스크롤 했는지 
		var isBottom = scrollTop+windowHeight==documentHeight;

		if(isBottom){
			$(".loader").show();

			setTimeout(function(){
				$("<div>추가됨</div>")
				.addClass("spacer")
				.appendTo(".container")
				.hide()
				.fadeIn();


				$(".loader").hide();
			}, 3000);
		}
	});
</script>
</body>
</html>